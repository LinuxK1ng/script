-- Converted to Lua 
conky.config = {
  background = true,
  update_interval = 1,

  cpu_avg_samples = 2,
  net_avg_samples = 2,
  no_buffers = true,
  double_buffer = true,
  text_buffer_size = 2048,
  use_spacer = "right",

  total_run_times = 0,
  gap_x = 16,
  gap_y = 64,

  minimum_width = 300,
  minimum_height = 0,
  maximum_width = 300,

  own_window = true,
  own_window_type = "dock",
  own_window_transparent = false,
  own_window_argb_visual = true,
  own_window_colour = "000000",
  own_window_argb_value = 0,
  own_window_hints = "undecorated,below,sticky,skip_taskbar,skip_pager",
  own_window_class = "Conky",
  own_window_title = "Cyrethium Conky",

  alignment = "top_right",
  xinerama_head = 0,
  draw_shades = false,
  draw_outline = false,
  draw_borders = false,
  draw_graph_borders = false,
  stippled_borders = 0,

  border_margin = 4,
  border_width = 1,

  override_utf8_locale = true,
  use_xft = true,
  font = "Monospace:size=8",
  xftalpha = 0.5,
  uppercase = false,

  -- High-contrast defaults for dark themes
  default_color = "FFFFFF",
  default_shade_color = "000000",
  default_outline_color = "FFFFFF",

  color1 = "DDDDDD",
  color2 = "AAAAAA",
  color3 = "888888",
  color4 = "EF5A29",
  color5 = "EF5A29",
  color6 = "3a5153",
}

conky.text = [[
${font Monospace:bold:size=10}${color4}CYRETHIUM STATUS ${color6}${hr 1}
${color}${font Monospace:size=8}
OS:${alignr}Cyrethium V1R (Reborn)
Kernel:${alignr}$kernel
Uptime:${alignr}$uptime
Host:${alignr}$nodename
User:${alignr}${execi 60 whoami}
Time:${alignr}${time %Y-%m-%d %H:%M:%S}
Load:${alignr}${loadavg}

${voffset 6}${font Monospace:bold:size=10}${color4}PRIVACY ${color6}${hr 1}
${color}${font Monospace:size=8}
Cyrethonion:${alignr}${if_existing /var/lib/cyrethonion/started}${color4}ENABLED${color}${else}${color2}DISABLED${color}${endif}
I2P:${alignr}${if_match ${execi 20 sh -c 'i2prouter status 2>/dev/null | grep -Fqi "I2P Service is running" && echo 1 || echo 0'} == 1}${color4}ENABLED${color}${else}${color2}DISABLED${color}${endif}
DNSCrypt-Proxy:${alignr}${if_match ${execi 30 sh -c 'systemctl is-active --quiet dnscrypt-proxy.service 2>/dev/null && echo 1 || echo 0'} == 1}${color4}ENABLED${color}${else}${color2}DISABLED${color}${endif}
VPN:${alignr}${if_up tun0}${color4}CONNECTED${color}${else}${color2}OFF${color}${endif}

${voffset 6}${font Monospace:bold:size=10}${color4}CPU ${color6}${hr 1}
${color}${font Monospace:size=8}
Total:${alignr}${cpu}%
Tasks:${alignr}$processes (Running: $running_processes)
Freq:${alignr}${freq_g 1} / ${freq_g 2} GHz
Temp:${alignr}${if_existing /sys/class/thermal/thermal_zone0/temp}${execi 10 awk '{printf("%.0f°C\n",$1/1000)}' /sys/class/thermal/thermal_zone0/temp}${else}${acpitemp}°C${endif}
${color4}${cpubar 6,280}${color}
Top CPU:${alignr}%
1) ${top name 1} ${alignr}${top cpu 1}
2) ${top name 2} ${alignr}${top cpu 2}
3) ${top name 3} ${alignr}${top cpu 3}

${voffset 6}${font Monospace:bold:size=10}${color4}MEMORY ${color6}${hr 1}
${color}${font Monospace:size=8}
$mem / $memmax ($memperc%) ${alignr}Swap: $swap/$swapmax ($swapperc%)
${color4}${membar 6,280}${color}
Top MEM:${alignr}%
1) ${top_mem name 1} ${alignr}${top_mem mem 1}
2) ${top_mem name 2} ${alignr}${top_mem mem 2}
3) ${top_mem name 3} ${alignr}${top_mem mem 3}

${voffset 6}${font Monospace:bold:size=10}${color4}DISK ${color6}${hr 1}
${color}${font Monospace:size=8}
Total:${alignr}${fs_used /} / ${fs_size /} (${fs_used_perc /}%)
${color4}${fs_bar 6,280 /}${color}

${voffset 6}${font Monospace:bold:size=10}${color4}NETWORK ${color6}${hr 1}
${color}${font Monospace:size=8}
${if_up wlp0s20f3}
Interface:${alignr}wlp0s20f3
IP:${alignr}${addr wlp0s20f3}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf wlp0s20f3} KiB/s
Up:${alignr}${upspeedf wlp0s20f3} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph wlp0s20f3 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph wlp0s20f3 12,280 3a5153 3a5153}${color}
${else}${if_up wlp2s0}
Interface:${alignr}wlp2s0
IP:${alignr}${addr wlp2s0}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf wlp2s0} KiB/s
Up:${alignr}${upspeedf wlp2s0} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph wlp2s0 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph wlp2s0 12,280 3a5153 3a5153}${color}
${else}${if_up wlp3s0}
Interface:${alignr}wlp3s0
IP:${alignr}${addr wlp3s0}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf wlp3s0} KiB/s
Up:${alignr}${upspeedf wlp3s0} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph wlp3s0 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph wlp3s0 12,280 3a5153 3a5153}${color}
${else}${if_up wlo1}
Interface:${alignr}wlo1
IP:${alignr}${addr wlo1}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf wlo1} KiB/s
Up:${alignr}${upspeedf wlo1} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph wlo1 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph wlo1 12,280 3a5153 3a5153}${color}
${else}${if_up wlan0}
Interface:${alignr}wlan0
IP:${alignr}${addr wlan0}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf wlan0} KiB/s
Up:${alignr}${upspeedf wlan0} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph wlan0 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph wlan0 12,280 3a5153 3a5153}${color}
${else}${if_up enp0s3}
Interface:${alignr}enp0s3
IP:${alignr}${addr enp0s3}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf enp0s3} KiB/s
Up:${alignr}${upspeedf enp0s3} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph enp0s3 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph enp0s3 12,280 3a5153 3a5153}${color}
${else}${if_up enp3s0}
Interface:${alignr}enp3s0
IP:${alignr}${addr enp3s0}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf enp3s0} KiB/s
Up:${alignr}${upspeedf enp3s0} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph enp3s0 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph enp3s0 12,280 3a5153 3a5153}${color}
${else}${if_up eno1}
Interface:${alignr}eno1
IP:${alignr}${addr eno1}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf eno1} KiB/s
Up:${alignr}${upspeedf eno1} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph eno1 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph eno1 12,280 3a5153 3a5153}${color}
${else}${if_up eth0}
Interface:${alignr}eth0
IP:${alignr}${addr eth0}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf eth0} KiB/s
Up:${alignr}${upspeedf eth0} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph eth0 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph eth0 12,280 3a5153 3a5153}${color}
${else}${if_up tun0}
Interface:${alignr}tun0
IP:${alignr}${addr tun0}
Gateway:${alignr}${gw_ip}
Down:${alignr}${downspeedf tun0} KiB/s
Up:${alignr}${upspeedf tun0} KiB/s
Conn:${alignr}${tcp_portmon 1 65535 count}
${color4}${downspeedgraph tun0 12,280 EF5A29 EF5A29}${color}
${color6}${upspeedgraph tun0 12,280 3a5153 3a5153}${color}
${else}
${color2}No active connection${color}
${endif}${endif}${endif}${endif}${endif}${endif}${endif}${endif}

]]
